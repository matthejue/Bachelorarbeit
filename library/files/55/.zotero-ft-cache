
Stack Overflow

    Products

    Log in
    Sign up

Join Stack Overflow to find the best answer to your technical question, help others answer theirs.
Sign up with email Sign up Sign up with Google Sign up with GitHub Sign up with Facebook

    Home
        Public
        Questions
        Tags
        Users
        Companies
        Collectives
        Explore Collectives
        Teams
        Stack Overflow for Teams – Start collaborating and sharing organizational knowledge. Create a free Team Why Teams?

What is a pythonic way of slicing a set?
Ask Question
Asked 5 years, 5 months ago
Modified 2 months ago
Viewed 15k times
This question shows research effort; it is useful and clear
9
This question does not show any research effort; it is unclear or not useful
3
Bookmark this question.
Show activity on this post.

I have some list of data, for example:

 some_data = [ 1 , 2 , 4 , 1 , 6 , 23 , 3 , 56 , 6 , 2 , 3 , 5 , 6 , 32 , 2 , 12 , 5 , 3 , 2 ]  

and I want to get unique values with fixed length (I don't care which I will get) and I also want it to be a set .

I know that I can do set from some_data then make it list , crop it and then make it set again.

 set ( list ( set (some_data))[: 5 ]) # doesn't look so friendly  

I understand that I don't have __getitem__ method in set which wouldn't make the whole slice thing possible, but if there is a chance to make it look better?

And I completely understand that set is unordered. So it doesn't matter which elements are in final set .

Possible options are to use:

    ordered-set

    using dict with None values:

     set ( dict ( map ( lambda x: (x, None ), some_data)).keys()[: 2 ]) # not that great  

python set
Share
Follow
Follow this question to receive notifications
edited Feb 17 at 17:04
user avatar
jarmod
58.6k 12 12 gold badges 95 95 silver badges 102 102 bronze badges
asked Nov 22, 2016 at 8:08
user avatar
vishes_shell vishes_shell
20.1k 6 6 gold badges 64 64 silver badges 77 77 bronze badges
2

    What is the purpose of doing this?
    –  jprockbelly
    Nov 22, 2016 at 8:18
    Purpose of getting set object with fixed length from big list of data. And then operating with this set(checking if value is in that set ).
    –  vishes_shell
    Nov 22, 2016 at 8:22

Add a comment  | 
4 Answers 4
Sorted by: Reset to default
This answer is useful
16
This answer is not useful
Show activity on this post.

Sets are iterable. If you really don't care which items from your set are selected, you can use itertools.islice to get an iterator that will yield a specified number of items (whichever ones come first in the iteration order). Pass the iterator to the set constructor and you've got your subset without using any extra lists:

 import itertools some_data = [ 1 , 2 , 4 , 1 , 6 , 23 , 3 , 56 , 6 , 2 , 3 , 5 , 6 , 32 , 2 , 12 , 5 , 3 , 2 ] big_set = set (some_data) small_set = set (itertools.islice(big_set, 5 ))  

While this is what you've asked for, I'm not sure you should really use it. Sets may iterate in a very deterministic order, so if your data often contains many similar values, you may end up selecting a very similar subset every time you do this. This is especially bad when the data consists of integers (as in the example), which hash to themselves. Consecutive integers will very frequently appear in order when iterating a set. With the code above, only 32 is out of order in big_set (using Python 3.5), so small_set is {32, 1, 2, 3, 4} . If you added 0 to the your data, you'd almost always end up with {0, 1, 2, 3, 4} even if the dataset grew huge, since those values will always fill up the first fives slots in the set's hash table.

To avoid such deterministic sampling, you can use random.sample as suggested by jprockbelly .
Share
Follow
Follow this answer to receive notifications
edited May 23, 2017 at 11:53
user avatar
Community Bot
1 1 1 silver badge
answered Nov 22, 2016 at 9:16
user avatar
Blckknght Blckknght
93.5k 11 11 gold badges 110 110 silver badges 159 159 bronze badges
1

    Awesome, i was thinking about islice , but then i switched to slice object which required __getitem__ , and then forgot about islice . Good point!
    –  vishes_shell
    Nov 22, 2016 at 9:24

Add a comment  | 
This answer is useful
7
This answer is not useful
Show activity on this post.

You could sample the set

 import random set (random.sample(my_set, 5 ))  

The advantage of this you'll get different numbers each time
Share
Follow
Follow this answer to receive notifications
edited Nov 22, 2016 at 8:34
answered Nov 22, 2016 at 8:21
user avatar
jprockbelly jprockbelly
1,492 15 15 silver badges 28 28 bronze badges
2

    Quite an option, but need to convert it to set , i need to run some timeit to understand if it's faster.
    –  vishes_shell
    Nov 22, 2016 at 8:26
    1
    Taking a random sample is not going to be faster than slicing. One of the first things the random.sample implementation does is copy it's argument into a list if it was a set (then it samples from the list). But using sample may be worth while anyway. It will avoid always getting the same values in your subset (sets may iterate in a non-random order, e.g. sets of consecutive small integers are often in order).
    –  Blckknght
    Nov 22, 2016 at 8:44

Add a comment  | 
This answer is useful
3
This answer is not useful
Show activity on this post.

You could try a simple set comprehension:

 some_data = [ 1 , 2 , 4 , 1 , 6 , 23 , 3 , 56 , 6 , 2 , 3 , 5 , 6 , 32 , 2 , 12 , 5 , 3 , 2 ] n = {x for i, x in enumerate ( set (some_data)) if i < 5 } print n  

Output:

set([32, 1, 2, 3, 4])
Share
Follow
Follow this answer to receive notifications
answered Nov 22, 2016 at 8:52
user avatar
ChatterOne ChatterOne
3,094 1 1 gold badge 15 15 silver badges 23 23 bronze badges
Add a comment  | 
This answer is useful
0
This answer is not useful
Show activity on this post.

I went through all the examples above and all of the answers are indeed great. I have one more approach to share in order to slice sets i.e. the use of the * operator. This approach requires us to use variables in order to store the memory address/references of elements. The final output we get after slicing is a list so if we want the final output to be a set we need to typecast the final result into a list or any other datatype we want to. The image of the code cannot be embedded since I do not have 10 points and therefore a link to the image of the code is given. Kindly do have a look and feel free to provide any suggestions regarding the same. Thanks.

The sample code image

The sample code image
Share
Follow
Follow this answer to receive notifications
edited Jun 5, 2021 at 9:53
user avatar
Slava Rozhnev
7,898 6 6 gold badges 21 21 silver badges 35 35 bronze badges
answered Jun 5, 2021 at 6:54
user avatar
Harshit Jain Harshit Jain
1 5 5 bronze badges
Add a comment  | 
Your Answer

Draft saved
Draft discarded
Sign up or log in
Sign up using Google
Sign up using Facebook
Sign up using Email and Password
Submit
Post as a guest
Name
Email

Required, but never shown
Post as a guest
Name
Email

Required, but never shown
Post Your Answer Discard

By clicking “Post Your Answer”, you agree to our terms of service , privacy policy and cookie policy
Not the answer you're looking for? Browse other questions tagged python set or ask your own question .

    The Overflow Blog
    Security needs to shift left into the software development lifecycle
    Unlock your full programming potential with The Key V2.0
    Featured on Meta
    Overhauling our community's closure reasons and guidance

Check out these companies

    roadsurfer GmbH
    Follow
    We are a dynamic, cosmopolitan and motivated bunch of people with great team spirit!
    vue.js php symfony
    26 followers
    dismiss this company
    Adference GmbH
    Follow
    Automated Bid & Campaign Optimization for Amazon & Google Ads
    python java rest
    16 followers
    dismiss this company
    ABOUT YOU SE & Co. KG
    Follow
    Hamburg's first Unicorn and one of the fastest-growing eCommerce startups in Europe.
    amazon-web-services google-bigquery
    149 followers
    dismiss this company
    iFit
    Follow
    iFit empowers people to change their lives and achieve sustainable, healthy results.
    c# objective-c java
    246 followers
    dismiss this company

By selecting follow, you are opting in to receive an email digest from the companies you follow. Don't worry, your information isn't shared.
More companies on Stack Overflow
59 people chatting
Python
2 mins ago - Hakaishin
[Hakaishin: 2 mins ago] [Aran-Fey: 3 mins ago] [Kevin: 3 mins ago] [vaultah: 37 mins ago] [smogm: 51 mins ago] [MisterMiyagi: 53 mins ago] [rattlesnake: 1 hour ago]
Linked
0
How to trim the size of a set in Python
Related
2982
What does ** (double star/asterisk) and * (star/asterisk) do for parameters?
6749
What are metaclasses in Python?
2089
Is there a way to run Python on Android?
12003
What does the "yield" keyword do?
3114
What is the difference between Python's list methods append and extend?
7469
What does if __name__ == "__main__": do?
3173
What is __init__.py for?
877
What is a clean "pythonic" way to implement multiple constructors?
3366
What is the difference between __str__ and __repr__?
1740
How to split the definition of a long string over multiple lines?
Hot Network Questions

    Why does std::is_invocable_r reject functions returning non-moveable types?
    Selecting every n'th index between the numerical index ranges of b and c using modulo in geometry nodes
    In combat, does a hidden character lose half their speed?
    What is the ideal method of sensing whether 4 points on the bottom of a device are all depressed to indicate contact?
    New bike is making rattling noise
    In the DCAU continuity, when did Superman go rogue?
    Typesetting functions: italics or non italics?
    What do symmetric weights mean and how does it make backpropagation biologically unplausible?
    Condition number of a matrix
    Can you just cancel a health insurance plan and buy a new one at any time?
    What happens if a Supreme Court member dies before a decision is announced?
    Meaning of ノッて来ん
    Is this language a context-free language or not?
    What is the default baud rate without calling Serial.begin?
    Invited to give talk but want to refuse
    Unexpected table/figure reference
    What does the "High Alt Landing" guarded push button on the A320 exactly do?
    When did horseback riding start? Are Doosheh cave petroglyphs authentic and correctly dated?
    What exactly does NTFS compression do to files?
    Wouldn't the cosmic background radiation (CMB) produce drag and thus create a preferential inertial frame?
    Should the company pay the tips I gave?
    How would you translate "The Adorned" for use as a collective title?
    Flights booked and tickets issued but no charge on my bank account?
    OSM Overpass query along track from QGIS

Question feed
Subscribe to RSS
Question feed

To subscribe to this RSS feed, copy and paste this URL into your RSS reader.
lang-py
Stack Overflow

    Questions
    Help

Products

    Teams
    Advertising
    Collectives
    Talent

Company

    About
    Press
    Work Here
    Legal
    Privacy Policy
    Terms of Service
    Contact Us
    Cookie Settings
    Cookie Policy

Stack Exchange Network

    Technology
    Culture & recreation
    Life & arts
    Science
    Professional
    Business
    API
    Data

    Blog
    Facebook
    Twitter
    LinkedIn
    Instagram

Site design / logo © 2022 Stack Exchange Inc; user contributions licensed under cc by-sa . rev 2022.5.6.42057
 
 
